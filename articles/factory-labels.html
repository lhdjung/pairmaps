<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pairmaps">
<title>Adverb, function operator, or function factory? • pairmaps</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adverb, function operator, or function factory?">
<meta property="og:description" content="pairmaps">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pairmaps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using-pairmaps.html">Using pairmaps</a>
    <a class="dropdown-item" href="../articles/factory-labels.html">Adverb, function operator, or function factory?</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lhdjung/pairmaps/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Adverb, function operator, or function factory?</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/pairmaps/blob/HEAD/vignettes/factory-labels.Rmd" class="external-link"><code>vignettes/factory-labels.Rmd</code></a></small>
      <div class="d-none name"><code>factory-labels.Rmd</code></div>
    </div>

    
    
<p>Functions like <code><a href="../reference/as_colpair_mapper.html">as_colpair_mapper()</a></code> are sometimes called
<em>adverbs</em> because they modify the behavior of existing functions
(i.e., “verbs”). Other examples are <code><a href="https://purrr.tidyverse.org/reference/safely.html" class="external-link">purrr::safely()</a></code> and <a href="https://juliasilge.github.io/widyr/reference/widely.html" class="external-link"><code>widyr::widely()</code></a>.</p>
<p>A more technical term is <em>function operator</em>, a special kind
of <em>function factory</em>. The latter refers to any function that
returns a function. In this way, function operators are simply function
factories that take one or more functions as input (Wickham 2019, <a href="https://adv-r.hadley.nz/function-factories.html" class="external-link">ch. 10-11</a>).</p>
<div class="section level3">
<h3 id="balancing-pros-and-cons">Balancing pros and cons<a class="anchor" aria-label="anchor" href="#balancing-pros-and-cons"></a>
</h3>
<p>I tend to prefer “function factory” because it’s more formal than
“adverb” but also highly evocative. It’s used in the context of other
languages as well, such as Python and Javascript. The term is less
precise than “function operator”, but I think this won’t do much harm.
Although function operators may not have the same use cases as other
factories, the differences are not too significant during development.
This is also true when working with the <a href="https://github.com/jonthegeek/factory" class="external-link">factory package</a>, a
great tool for writing new function factories.</p>
<p>Yet “adverb” is an elegant metaphor that smoothly conveys these
functions’ usage. Consider this example from purrr:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">safe_log</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/safely.html" class="external-link">safely</a></span><span class="op">(</span><span class="va">log</span><span class="op">)</span></span>
<span><span class="fu">safe_log</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; $result</span></span>
<span><span class="co">#&gt; [1] 2.302585</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $error</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Somebody who is familiar with <code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code> but not with
function factories will more likely make sense of the idea that
<code>safely()</code> modifies the way <code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code> works. It
might be less intuitive that <code>safely()</code> takes
<code>log</code> as an input, returns the new <code>safe_log</code>
function,<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;I leave out the parentheses here to emphasize that
&lt;code&gt;log&lt;/code&gt; and &lt;code&gt;safe_log&lt;/code&gt; are functions, not function
calls; and that they can be passed and returned like any other R object.
Everywhere else, however, I use the conventional &lt;code&gt;&lt;a href="https://rdrr.io/r/base/Log.html" class="external-link"&gt;log()&lt;/a&gt;&lt;/code&gt;-like
notation.&lt;/p&gt;'><sup>1</sup></a> and then calls that function with some
other object as an argument — although that is exactly what happens, and
what function operators in general do.</p>
<p>Accessible explanations are needed even more acutely if we rewrite
the example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/safely.html" class="external-link">safely</a></span><span class="op">(</span><span class="va">log</span><span class="op">)</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; $result</span></span>
<span><span class="co">#&gt; [1] 2.302585</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $error</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>This syntax — two sets of parentheses, seemingly following the same
function — will puzzle anybody who encounters it for the first time.
What goes on here is easier to explain by saying that
<code>safely()</code> is an adverb that changes they way
<code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code> works. Note that the output is the same as before, so
the two notations are equivalent.</p>
<p>Referring to such functions as “adverbs”, however, is not very
precise. R objects usually can’t be modified in place (Wickham 2019, <a href="https://adv-r.hadley.nz/names-values.html#copy-on-modify" class="external-link">ch. 2.3</a>),
and adverbs don’t actually change their input functions. Instead, they
create and return entirely new functions that apply the input ones in
some particular way. The sheer complexity of all this means that
speaking of adverbs and modification will often be reasonable,
especially when the focus is on <em>using</em> function factories, not
writing them.</p>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>All things considered, it seems wise of the developer community to
speak of adverbs in user-facing contexts and of function factories /
operators in developer-facing contexts. Both sources linked above that
reference adverbs are documentation pages for existing functions. By
contrast, chapters 10-11 of <em>Advanced R</em> (Wickham 2019) are
directed at more experienced R programmers who might want to write
function factories themselves. The same applies to the <a href="https://github.com/jonthegeek/factory" class="external-link">factory package’s
readme</a>. This audience will need a deeper understanding of the way
such functions work, and the concept of “function factories” will bring
them into sharper view.</p>
<p><em>Advanced R</em> only uses the term “adverb” once, describing
function operators in the <a href="https://adv-r.hadley.nz/fp.html" class="external-link">introduction</a> to the relevant
chapters: “They are like adverbs, because they typically modify the
operation of a function.” Isn’t that a nice segue?</p>
<p>Sticking to the same few terms is advisable in any case, lest
somebody points out that <code><a href="../reference/as_colpair_mapper.html">as_colpair_mapper()</a></code> is actually an
adverbial phrase.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Wickham, H. (2019). <em>Advanced R</em> (Second Edition), CRC
Press/Taylor and Francis Group. <a href="https://adv-r.hadley.nz/index.html" class="external-link uri">https://adv-r.hadley.nz/index.html</a>.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
